# AWS

## IAM & AWS CLI
### IAM (Identity and Access Management)
IAM에서는 사용자를 생성하고, 그룹에 배치하기 때문에 글로벌 서비스에 해당됩니다. 맨 처음 계정을 생성할 때 루트 계정이 기본으로 생성되는데, 그 후에는 루트 계정을 더 이상 사용해서도, 공유해서도 안 됩니다. 그 대신 **새로운 사용자를 생성하는 것**이 좋습니다. 

여기서 사용자와 그룹을 생성하는 이유는 뭘까요? 루트 사용자는 계정에 대한 모든 권한을 가지고 있습니다. 어떤 작업이라도 가능하고, 모든 설정에 접근할 수 있습니다. 그렇기 때문에 위험한 계정이 될 수 있고, 보안 상의 이유로도 사용하지 않는 것이 좋습니다. 따라서 별도의 관리자 계정을 만드는 것이 좋습니다.

사용자나 그룹을 생성하면 각각 **권한을 부여해서 AWS 계정 사용을 허용할 수 있습니다.** 이를 위해 **사용자 또는 그룹에게 정책, 또는 IAM 정책이라고 불리는 JSON 문서를 지정할 수 있습니다.**

<img width="400" alt="aws" src="https://user-images.githubusercontent.com/87610758/199052285-919462bf-3e97-4ebd-97f3-42c94bdb95f5.png">


문서는 이런 형태입니다. 프로그래밍이 아니기 때문에 프로그래머가 아니어도 이해가 가능합니다. 간단한 영어로 **특정 사용자, 혹은 특정 그룹에 속한 모든 사용자들이 어떤 작업에 권한을 가지고 있는지를 설명해 놓은 문서**입니다.

이와 같은 형태의 JSON 문서를 통해 사용자들이 AWS 서비스를 이용하도록 허용할 수 있습니다. **이 정책들을 사용해 사용자들의 권한을 정의할 수 있게 됩니다.** AWS에서는 모든 사용자에게 모든 권한을 허용하지 않습니다. 모든 권한이 허용된다면, 새로운 사용자가 실행하는 서비스마다 큰 비용이 발생하거나, 보안 문제를 야기할 수도 있습니다. 따라서 AWS에서는 **최소 권한의 원칙을 적용합니다.** 즉 사용자가 꼭 필요로 하는 것 이상의 권한을 주지 않는 것입니다. 사용자가 세 개의 서비스에 접근해야 한다면 그에 대한 권한만 제한적으로 설정해야 합니다.

### IAM 콘솔 체험하기
IAM에서는 사용자와 그룹이 글로벌 관점에서 생성됩니다.

<img width="800" alt="aws" src="https://user-images.githubusercontent.com/87610758/199054065-c3ec1ce7-bc11-4c1d-b9a2-429cd3ea853c.png">


우리는 현재 IAM 대시보드에 있습니다. 처음으로 할 일은 IAM 사용자를 생성하는 것입니다. 사용자 항목으로 이동해 사용자 추가를 선택하겠습니다.

![image](https://user-images.githubusercontent.com/87610758/199054862-4829240e-094e-44d4-9b1d-ca8ab1cba201.png)

왜 사용자를 생성해야 할까요?
보시는 것처럼 상단의 계정 이름을 클릭해 보시면 현재 루트 계정을 사용 중입니다. 앞서 설명했던 것처럼 루트 사용자는 계정에 대한 모든 권한을 가지고 있기 때문에, 보안 상의 이유로 새로운 사용자에 사용하려고 하는 서비스에만 권한을 제한적으로 부여해서 서비스를 이용하는 것이 좋습니다.

![image](https://user-images.githubusercontent.com/87610758/199055158-32e6c18d-1821-48a1-9d52-d9453b45769d.png)

사용하고자 하는 사용자 이름과 암호를 설정합니다. 비밀번호 재설정 필요는 체크 해제해도 됩니다.

![image](https://user-images.githubusercontent.com/87610758/199055970-fc5a648a-4712-4915-aed7-3f6a25d80631.png)

이제 사용자를 그룹에 배치할 겁니다. 먼저 그룹을 만들건데, 그룹 이름은 admin으로 하겠습니다.

![image](https://user-images.githubusercontent.com/87610758/199056997-4d289158-0673-43da-b9da-a4cc6973b023.png)

admin 그룹에 배치된 사용자는 이 그룹에 부여된 권한을 내려받게 됩니다. 그리고 권한은 정책을 통해 정의됩니다. 여기서 admin 그룹에 연결할 정책은 AdministratorAccess입니다. 이 정책은 admin 그룹에 속한 모든 사용자가 계정의 관리자 역할을 하도록 허용합니다.

![image](https://user-images.githubusercontent.com/87610758/199057052-fca642d5-14ce-4524-bc41-71044d2af292.png)

다음: 태그 버튼을 누릅니다.

![image](https://user-images.githubusercontent.com/87610758/199057283-cb16a52b-da65-47aa-9f7e-b663dbb31e79.png)

태그는 사용자의 접근을 추적, 조직, 제어할 수 있도록 도와주는 정보입니다. 특정 사용자에 대해 단순히 정보를 추가하는 용도입니다. 
작성 후 다음: 검토 버튼을 누릅니다.

![image](https://user-images.githubusercontent.com/87610758/199057887-84b9b3af-4a4d-4128-b618-fb0c3da86bba.png)

우리가 생성했던 사용자 이름, 관리콘솔 접근 방법, 비밀번호 설정 등의 정보를 요약해서 볼 수 있습니다. 사용자 만들기 버튼을 눌러봅시다.

![image](https://user-images.githubusercontent.com/87610758/199058148-2e56092b-93cc-4f0c-a5e1-52888cccd624.png)

진행하기 전 먼저 .csv 파일을 다운로드해야 합니다. 이 Download.csv 파일 내부에는 사용자들의 자격 증명 정보가 있습니다. **내가 아닌 팀원이나 다른 사용자 계정을 생성한 경우**에는 해당 계정을 사용하려는 사람의 메일 주소로 로그인에 대한 설명을 전송할 수도 있습니다.

![image](https://user-images.githubusercontent.com/87610758/199059499-0e1dc6b2-f52e-462c-ae1c-d28753cad236.png)

이제 우리가 생성한 내용을 살펴봅시다.

![image](https://user-images.githubusercontent.com/87610758/199059860-2ed2e4a1-a0d0-4ff1-9f18-5d5a58760174.png)


